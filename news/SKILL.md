# news - 企业新闻抓取

从多个权威来源实时抓取企业的最新新闻资讯，支持多维度筛选和智能排序。

## 功能特性

### 核心能力
- **多源聚合**：整合百度新闻、新浪财经、腾讯财经、东方财富等多个新闻源
- **实时更新**：获取最新发布的企业相关新闻
- **智能去重**：自动过滤重复内容，保留最具价值的报道
- **时间排序**：按发布时间倒序排列，支持时间范围筛选
- **相关性评分**：基于关键词匹配度排序，优先展示高相关度内容

### 支持的查询类型
- 公司重大新闻（融资、并购、上市等）
- 产品发布与技术更新
- 高管动态与人事变动
- 财务业绩公告
- 政策法规影响
- 行业竞争动态

## 使用方法

### 基础用法
```bash
./fetch.sh "公司名称"
./fetch.sh "腾讯"
./fetch.sh "阿里巴巴"
```

### 高级用法
```bash
# 指定返回数量（默认10条）
./fetch.sh "公司名称" --limit 20

# 指定时间范围（天）
./fetch.sh "公司名称" --days 7

# 仅获取财经新闻
./fetch.sh "公司名称" --category finance

# 仅获取科技新闻
./fetch.sh "公司名称" --category tech

# 组合参数
./fetch.sh "公司名称" --limit 15 --days 3 --category finance
```

### 脚本参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `公司名称` | 要查询的企业名称 | 必填 |
| `--limit` | 返回新闻数量 | 10 |
| `--days` | 搜索时间范围（天） | 30 |
| `--category` | 新闻分类：all/finance/tech/policy | all |
| `--source` | 指定新闻源：baidu/sina/eastmoney/qq | all |

## 输出示例

```
📰 正在抓取 腾讯 的最新新闻...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📰 腾讯 最新新闻 (共5条)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【1】腾讯发布2024年第四季度财报
  📅 2024-02-03 14:30
  🏷️ 财经
  🔗 https://news.example.com/12345
  
【2】微信支付推出新功能
  📅 2024-02-03 10:15
  🏷️ 科技
  🔗 https://news.example.com/12346
  
【3】腾讯云与某银行达成战略合作
  📅 2024-02-02 18:45
  🏷️ 财经
  🔗 https://news.example.com/12347

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 新闻抓取完成，共 3 条
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 技术实现

### 数据来源
1. **百度新闻** - 综合搜索，覆盖面广
2. **新浪财经** - 财经类专业新闻
3. **东方财富** - 股市公告与财经信息
4. **腾讯财经** - 腾讯系媒体资讯
5. **凤凰财经** - 深度报道与分析

### 数据字段
每个新闻条目包含：
- 标题（title）
- 发布时间（publish_time）
- 来源（source）
- 分类（category）
- 摘要（summary）
- 原文链接（url）

### 缓存机制
- 新闻数据默认缓存 1 小时
- 缓存目录：`~/.cache/wuwenzixun/news/`
- 强制刷新：使用 `--force` 参数

## 依赖项

- `curl` - HTTP 请求
- `jq` - JSON 处理（可选，用于格式化输出）
- `grep` / `sed` - 文本处理

## 扩展功能

### Python 增强版（可选）
```bash
# 使用 Python 获取结构化 JSON 数据
python3 fetch.py "公司名称" --json
```

### API 接口
支持通过命令行调用或作为库函数引用：
```bash
curl -s "http://localhost:8080/api/news?company=腾讯&limit=10"
```

## 常见问题

**Q: 新闻抓取失败？**
A: 检查网络连接，或使用 `--retry` 参数重试

**Q: 如何获取更多历史新闻？**
A: 使用 `--days` 参数增加时间范围

**Q: 能否指定特定新闻源？**
A: 使用 `--source` 参数，如 `--source baidu`

## 相关技能

- [risk](../risk/SKILL.md) - 风险信息检索
- [finance](../finance/SKILL.md) - 财务信息抓取
- [report](../report/SKILL.md) - 风险分析报告
- [outlook](../outlook/SKILL.md) - 未来展望建议

---

**维护者**: wuwenzixun team  
**版本**: 1.0.0  
**最后更新**: 2024-02-03
