# wuwenzixun - 企业风险分析助手

实时抓取指定企业的网上信息，生成企业风险分析和未来展望报告。

## 项目结构

```
wuwenzixun/
├── news/           # 企业新闻抓取
│   ├── SKILL.md    # 技能文档
│   └── fetch.sh    # 新闻获取脚本
├── risk/           # 风险信息检索
│   ├── SKILL.md    # 技能文档
│   └── check.sh    # 风险检查脚本
├── finance/        # 财务信息抓取
│   ├── SKILL.md    # 技能文档
│   └── fetch.sh    # 财务获取脚本
├── report/         # 风险分析报告
│   ├── SKILL.md    # 技能文档
│   └── generate.sh # 报告生成脚本
├── outlook/        # 未来展望建议
│   ├── SKILL.md    # 技能文档
│   └── predict.sh  # 预测脚本
├── SKILL.md        # 主技能文档
├── CLAUDE.md       # Claude Code 开发指南
├── USAGE.md        # 用户使用文档
├── analyze.sh      # 统一入口脚本
├── config.sh       # 配置文件
├── utils.sh        # 公共函数库
└── requirements.txt # Python 可选依赖
```

## 快速开始

```bash
# 查看帮助
./analyze.sh --help

# 完整分析流程
./analyze.sh "公司名称"

# 指定分析深度
./analyze.sh "公司名称" --depth full

# 单独使用某个子技能
bash news/fetch.sh "公司名称"
```

## 子技能概览

### 1. news - 企业新闻抓取
**功能**：从搜索引擎抓取企业相关新闻标题

**特性**：
- 多源聚合（百度、搜狗）
- 自动去重
- 结果缓存（1 小时）

**使用**：
```bash
bash news/fetch.sh "腾讯"       # 默认 10 条
bash news/fetch.sh "腾讯" 5     # 指定条数
```

**详细文档**：[news/SKILL.md](news/SKILL.md)

### 2. risk - 企业风险信息检索
**功能**：检索企业风险信息，覆盖诉讼、处罚、失信、舆情四个维度

**特性**：
- 四维度风险检索（诉讼、处罚、失信、负面舆情）
- 每个维度多关键词交叉搜索
- 结果缓存（24 小时）

**使用**：
```bash
bash risk/check.sh "恒大"
```

**详细文档**：[risk/SKILL.md](risk/SKILL.md)

### 3. finance - 企业财务信息抓取
**功能**：抓取企业财务相关公开信息

**特性**：
- 四维度检索（财报数据、营收利润、资产负债、业绩动态）
- 每个维度多关键词交叉搜索
- 结果缓存（12 小时）

**使用**：
```bash
bash finance/fetch.sh "贵州茅台"
```

**详细文档**：[finance/SKILL.md](finance/SKILL.md)

### 4. report - 风险分析报告生成
**功能**：整合新闻、风险、财务数据，生成 Markdown 格式综合报告

**特性**：
- 自动读取各模块缓存数据
- 包含执行摘要、五维度综合评估表
- Markdown 格式输出
- 结果缓存（12 小时）

**使用**：
```bash
bash report/generate.sh "宁德时代"
```

**详细文档**：[report/SKILL.md](report/SKILL.md)

### 5. outlook - 未来展望建议
**功能**：基于已采集数据，生成短/中/长期展望和行动建议

**特性**：
- 三时间维度预测（短期/中期/长期）
- 基于风险数据量动态调整关注度评级
- 附带具体行动建议
- 结果缓存（24 小时）

**使用**：
```bash
bash outlook/predict.sh "比亚迪"
```

**详细文档**：[outlook/SKILL.md](outlook/SKILL.md)

## 统一入口

### analyze.sh 主脚本

```bash
# 基础用法
./analyze.sh "公司名称"

# 完整分析（深度）
./analyze.sh "公司名称" --depth full

# 快速概览
./analyze.sh "公司名称" --depth quick

# 查看帮助
./analyze.sh --help
```

**参数说明**：

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `公司名称` | 要分析的企业 | 必填 |
| `--depth` | 分析深度：quick/normal/full | normal |
| `--help` | 显示帮助信息 | - |

## 工作流程

```
┌─────────────────────────────────────────────────────────┐
│                    wuwenzixun 工作流程                  │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
            ┌───────────────┴───────────────┐
            │      1. 输入企业名称           │
            │      ./analyze.sh "公司"      │
            └───────────────┬───────────────┘
                            │
            ┌───────────────▼───────────────┐
            │      2. 新闻抓取 (news)        │
            │      ./fetch.sh "公司"         │
            └───────────────┬───────────────┘
                            │
            ┌───────────────▼───────────────┐
            │      3. 风险检索 (risk)        │
            │      ./check.sh "公司"        │
            └───────────────┬───────────────┘
                            │
            ┌───────────────▼───────────────┐
            │      4. 财务抓取 (finance)     │
            │      ./fetch.sh "公司"        │
            └───────────────┬───────────────┘
                            │
            ┌───────────────▼───────────────┐
            │      5. 报告生成 (report)     │
            │      ./generate.sh "公司"     │
            └───────────────┬───────────────┘
                            │
            ┌───────────────▼───────────────┐
            │      6. 未来展望 (outlook)    │
            │      ./predict.sh "公司"      │
            └───────────────┬───────────────┘
                            │
                            ▼
            ┌───────────────┴───────────────┐
            │      7. 输出综合报告          │
            └───────────────────────────────┘
```

## 风险评分体系

### 权重分配

报告的综合评估表按以下权重展示各维度数据覆盖情况：

```
权重分配：
├── 财务风险: 30%
├── 运营风险: 25%
├── 法律风险: 20%
├── 市场风险: 15%
└── 声誉风险: 10%
```

权重在 `config.sh` 的 `WEIGHTS` 数组中配置。

> 注：当前版本尚未实现量化评分，报告中展示的是各维度的数据采集量。量化评分功能计划在后续版本中实现。

## 环境要求

- **系统**: macOS / Linux / Windows (WSL)
- **Bash**: 3.2+（兼容 macOS 默认版本）
- **核心依赖**:
  - `curl` - HTTP 请求

- **可选依赖**:
  - `python3` - URL 编码（无 python3 时自动回退到 curl 方式）

## 配置说明

在 `config.sh` 中配置：

```bash
# 分析深度
ANALYSIS_DEPTH="normal"

# 输出格式
OUTPUT_FORMAT="markdown"

# 缓存目录
CACHE_DIR="$HOME/.cache/wuwenzixun"

# HTTP 请求配置
REQUEST_TIMEOUT=15
REQUEST_RETRY=3

# 日志级别
LOG_LEVEL="info"
```

## 数据来源

当前所有模块通过搜索引擎抓取公开信息：

- **百度搜索** - 新闻、风险、财务信息的主要数据源
- **搜狗搜索** - 新闻模块的补充数据源

## 输出示例

```
# 腾讯 风险分析报告

生成时间: 2026-02-07 17:00:00

---

## 执行摘要

本报告基于公开信息对 **腾讯** 进行综合风险分析。
数据覆盖: 新闻动态(5条)、风险事件(13条)、财务信息(3条)。

## 综合评估

| 维度 | 权重 | 数据量 |
|------|------|--------|
| 财务风险 | 30% | 3条 |
| 运营风险 | 25% | - |
| 法律风险 | 20% | 13条 |
| 市场风险 | 15% | 5条 |
| 声誉风险 | 10% | - |

## 结论与建议

1. 持续关注企业新闻动态和舆情变化
2. 定期更新风险评估数据
3. 重点关注已识别的风险事项
```

## 常见问题

**Q: 运行后数据为空怎么办？**
A: 搜索引擎可能对自动化请求做了限制，过一段时间重试，或删除缓存 `rm -rf ~/.cache/wuwenzixun/` 后再运行

**Q: 数据多久更新？**
A: 新闻缓存 1 小时，财务/报告缓存 12 小时，风险/展望缓存 24 小时

**Q: 如何保存报告到文件？**
A: 使用重定向：`./analyze.sh "腾讯" > 报告.md 2>/dev/null`

## 相关链接

- **GitHub**: https://github.com/IceThunder/wuwenzixun
- **Issues**: 报告问题或功能建议

## 许可证

MIT License

---

**维护者**: wuwenzixun team
**版本**: 1.1.0
**最后更新**: 2026-02-07
